class @Mightbuy.SocialShare
  constructor: ->
    if $(".tweet-topic").length > 0
      @bindTweetLinks()

    if $(".like-topic").length > 0
      @bindLikeLinks()

  bindTweetLinks: ->
    $(".tweet-topic").click (e) =>
      intentUrl = $(e.currentTarget).attr("data-tweet-intent")
      window.open(intentUrl, 'MightBuy', 'scrollbars=yes,width=600,height=250')
      false

  bindLikeLinks: ->
      $(".like-topic").click (e) =>
        el = $(e.currentTarget)
        FB.ui
          method: "feed"
          name: el.attr("data-name")
          link: el.attr("data-link")
          picture: el.attr("data-picture")
          caption: el.attr("data-caption")
          description: el.attr("data-description")
        false

Mightbuy.initFB = ->
  FB.init
    appId: '<%= MB.config.facebook_appid %>'
    status: true
    cookie: true

jQuery ->
  Mightbuy.socialShare = new Mightbuy.SocialShare()
